# アセンブリインタプリタツール - 要件定義書

## プロジェクト概要

CTF競技での解析作業を支援するx86-64アセンブリインタプリタツールを開発する。ユーザーがdisassembly結果を貼り付けて、ステップ実行しながらレジスタとメモリの状態を視覚的に追跡できるWebベースのツール。

## 機能要件

### 基本機能

#### F1. アセンブリコード入力機能

- **F1.1** テキストエリアでのアセンブリコード入力
- **F1.2** disassembly形式の解析（objdump出力形式）
- **F1.3** アドレス、バイトコード、命令の自動パース
- **F1.4** シンタックスハイライト表示

#### F2. ステップ実行機能

- **F2.1** 1行ずつのステップ実行
- **F2.2** 連続実行（Run機能）
- **F2.3** 実行位置の視覚的表示
- **F2.4** ブレークポイント設定機能

#### F3. レジスタ表示機能

- **F3.1** x86-64基本レジスタ（RAX, RBX, RCX, RDX, RSI, RDI, RSP, RBP）
- **F3.2** 拡張レジスタ（R8-R15）
- **F3.3** フラグレジスタ（ZF, SF, CF, OF等）
- **F3.4** レジスタ値の16進数/10進数表示切り替え
- **F3.5** 変更されたレジスタのハイライト表示

#### F4. メモリ表示機能

- **F4.1** スタック領域の表示
- **F4.2** メモリアドレスとデータの表示
- **F4.3** メモリ変更の視覚的ハイライト
- **F4.4** スタックポインタ位置の明示

#### F5. 命令解析機能

- **F5.1** 基本的な算術命令（add, sub, mov等）
- **F5.2** 論理命令（and, or, xor等）
- **F5.3** 比較・分岐命令（cmp, jmp, je等）
- **F5.4** スタック操作命令（push, pop等）
- **F5.5** 関数呼び出し命令（call, ret等）

### 上級機能

#### F6. デバッグ支援機能

- **F6.1** 実行履歴の表示
- **F6.2** レジスタ変更履歴
- **F6.3** 実行状態のリセット機能

#### F7. CTF特化機能

- **F7.1** 文字列データの自動検出・表示
- **F7.2** フラグ形式（CTF{...}）の自動ハイライト
- **F7.3** バイナリデータの文字表現

## 非機能要件

### NF1. ユーザビリティ

- **NF1.1** 直感的なUI設計（既存ツール群と統一感）
- **NF1.2** レスポンシブデザイン対応
- **NF1.3** キーボードショートカット対応

### NF2. パフォーマンス

- **NF2.1** リアルタイムでのステップ実行
- **NF2.2** 大きなアセンブリコード（1000行以上）への対応
- **NF2.3** ブラウザ上での軽量動作

### NF3. 互換性

- **NF3.1** 主要ブラウザ対応（Chrome, Firefox, Safari）
- **NF3.2** objdump標準形式の完全対応
- **NF3.3** GDB disassembly形式の対応

### NF4. 保守性

- **NF4.1** 既存プロジェクトアーキテクチャとの統合
- **NF4.2** モジュラー設計（命令セット拡張可能）
- **NF4.3** TypeScript型安全性の確保

## 技術制約

### TC1. フロントエンド制約

- **TC1.1** SvelteKit + TypeScript + Tailwind CSSの使用
- **TC1.2** 既存のIconifyアイコンシステムの活用
- **TC1.3** クライアントサイドでの完全動作（サーバー不要）

### TC2. セキュリティ制約

- **TC2.1** 悪意あるコード実行の防止
- **TC2.2** ローカルデータのみの処理
- **TC2.3** ブラウザサンドボックス内での動作

## 想定ユーザー

### PU1. プライマリユーザー

- CTF競技参加者
- リバースエンジニアリング学習者
- アセンブリ言語学習者

### PU2. 使用場面

- CTF競技中のバイナリ解析
- アセンブリコードの動作理解
- デバッグ作業の効率化

## 成功基準

### SC1. 機能面

- objdump出力の正確な解析（95%以上）
- 基本命令の正しい実行（100%）
- CTF問題での実用的な利用

### SC2. ユーザビリティ面

- 初回利用時の直感的操作
- 既存ツールとの操作一貫性
- CTFコミュニティでの採用

## 除外事項

### EX1. サポート範囲外

- x86（32bit）アーキテクチャ
- ARM、MIPS等の他アーキテクチャ
- 実際のシステムコール実行
- ファイルI/O操作の模擬

### EX2. 高度な機能

- デバッガレベルの高度な解析
- パフォーマンス計測
- メモリ保護機構の模擬
